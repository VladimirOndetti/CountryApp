import{A as h,B as se,C as ce,D as le,E as _,F as a,G as I,H as E,I as pe,J as F,K as N,L as T,M as k,N as me,O as P,P as g,Q as ue,R as j,S as de,T as ge,X as fe,Z as ye,_ as Ce,a as ee,aa as X,b as K,ba as he,c as te,d as G,e as ne,f as ie,g as x,h as oe,i as D,j as re,k as w,l as O,m as ae,n as W,o as M,p as s,q as d,r as p,s as V,t as u,u as c,v as o,w as i,x as l,y as L,z as C}from"./chunk-PFXCMDJZ.js";var f=class n{constructor(t){this.http=t;this.loadFromLocalStorage()}apiUrl="https://restcountries.com/v3.1";cacheStore={byCapital:{queryTerm:"",countries:[]},byCountries:{queryTerm:"",countries:[]},byRegion:{region:"",countries:[]}};saveToLocalStorage(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadFromLocalStorage(){localStorage.getItem("cacheStore")&&(this.cacheStore=JSON.parse(localStorage.getItem("cacheStore")))}getCountriesRequest(t){return this.http.get(t).pipe(G(e=>(console.log(e),K([]))))}searchcountryByAphaCode(t){console.log("searchcountryByAphaCode",t);let e=`${this.apiUrl}/alpha/${t}`;return this.http.get(e).pipe(te(r=>r.length>0?r[0]:null),G(r=>K(null)))}searchByCapital(t){console.log("searchCapital",t);let e=`${this.apiUrl}/capital/${t}`;return this.getCountriesRequest(e).pipe(x(r=>this.cacheStore.byCapital={queryTerm:t,countries:r}),x(()=>this.saveToLocalStorage()))}searchCountry(t){console.log("searchCountry",t);let e=`${this.apiUrl}/name/${t}`;return this.getCountriesRequest(e).pipe(x(r=>this.cacheStore.byCountries={queryTerm:t,countries:r}),x(()=>this.saveToLocalStorage()))}searchByRegion(t){console.log("searchByRegion",t);let e=`${this.apiUrl}/region/${t}`;return this.getCountriesRequest(e).pipe(x(r=>this.cacheStore.byRegion={region:t,countries:r}),x(()=>this.saveToLocalStorage()))}static \u0275fac=function(e){return new(e||n)(re(ge))};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Se=["searchInput"],B=class n{debounser=new ee;debuncerSuscription;searchInput;initialValue="";placeholder="";onValue=new W;onDebounce=new W;ngOnInit(){this.debuncerSuscription=this.debounser.pipe(ne(500)).subscribe(t=>this.onDebounce.emit(t))}ngOnDestroy(){this.debuncerSuscription?.unsubscribe()}emitValue(t){this.onValue.emit(t)}onKeyPress(t){this.debounser.next(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["shared-search-box"]],viewQuery:function(e,r){if(e&1&&se(Se,5),e&2){let m;ce(m=le())&&(r.searchInput=m.first)}},inputs:{initialValue:"initialValue",placeholder:"placeholder"},outputs:{onValue:"onValue",onDebounce:"onDebounce"},standalone:!1,decls:2,vars:2,consts:[["searchInput",""],["type","text",1,"form-control",3,"keyup","keyup.enter","placeholder","value"]],template:function(e,r){if(e&1){let m=L();o(0,"input",1,0),C("keyup",function(){w(m);let J=_(1);return O(r.onKeyPress(J.value))})("keyup.enter",function(){w(m);let J=_(1);return O(r.emitValue(J.value))}),i()}e&2&&c("placeholder",r.placeholder)("value",r.initialValue)},encapsulation:2})};var b=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["shared-loading-spinner"]],standalone:!1,decls:15,vars:0,consts:[[1,"spinner-container"],["width","35","height","35","viewBox","0 0 45 45","xmlns","http://www.w3.org/2000/svg","stroke","#fff"],["fill","none","fill-rule","evenodd","transform","translate(1 1)","stroke-width","2"],["cx","22","cy","22","r","6","stroke-opacity","0"],["attributeName","r","begin","1.5s","dur","3s","values","6;22","calcMode","linear","repeatCount","indefinite"],["attributeName","stroke-opacity","begin","1.5s","dur","3s","values","1;0","calcMode","linear","repeatCount","indefinite"],["attributeName","stroke-width","begin","1.5s","dur","3s","values","2;0","calcMode","linear","repeatCount","indefinite"],["attributeName","r","begin","3s","dur","3s","values","6;22","calcMode","linear","repeatCount","indefinite"],["attributeName","stroke-opacity","begin","3s","dur","3s","values","1;0","calcMode","linear","repeatCount","indefinite"],["attributeName","stroke-width","begin","3s","dur","3s","values","2;0","calcMode","linear","repeatCount","indefinite"],["cx","22","cy","22","r","8"],["attributeName","r","begin","0s","dur","1.5s","values","6;1;2;3;4;5;6","calcMode","linear","repeatCount","indefinite"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"span"),a(2,"Loading"),i(),ae(),o(3,"svg",1)(4,"g",2)(5,"circle",3),l(6,"animate",4)(7,"animate",5)(8,"animate",6),i(),o(9,"circle",3),l(10,"animate",7)(11,"animate",8)(12,"animate",9),i(),o(13,"circle",10),l(14,"animate",11),i()()()())},styles:[".spinner-container[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px;background-color:#000;color:#fff;padding:5px 10px;border-radius:20px;display:flex;align-items:center;box-shadow:2px 2px 5px #0003}span[_ngcontent-%COMP%]{margin-left:5px}"]})};var _e=n=>["/countries/by/",n];function Ie(n,t){n&1&&(o(0,"div",2),a(1,` No hay pa\xEDses que mostrar
`),i())}function Ee(n,t){if(n&1&&(o(0,"tr")(1,"td"),a(2),i(),o(3,"td"),l(4,"img",5),i(),o(5,"td"),a(6),i(),o(7,"td"),a(8),i(),o(9,"td"),a(10),N(11,"number"),i(),o(12,"td")(13,"a",6),a(14," Info "),i()()()),n&2){let e=t.$implicit,r=t.index;s(2),I(r+1),s(2),c("src",e.flags.svg,M)("alt",e.name.common),s(2),I(e.name.common),s(2),I(e.capital),s(2),I(T(11,7,e.population)),s(3),c("routerLink",F(9,_e,e.cca3))}}function Pe(n,t){if(n&1&&(o(0,"table",3)(1,"thead")(2,"tr")(3,"th"),a(4,"#"),i(),o(5,"th"),a(6,"Bandera"),i(),o(7,"th"),a(8,"Nombre"),i(),o(9,"th"),a(10,"Capital"),i(),o(11,"th"),a(12,"Poblacion"),i(),l(13,"th"),i()(),o(14,"tbody"),u(15,Ee,15,11,"tr",4),i()()),n&2){let e=h();s(15),c("ngForOf",e.countries)}}var v=class n{countries=[];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["countries-table"]],inputs:{countries:"countries"},standalone:!1,decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"table","table-header"],[4,"ngFor","ngForOf"],["width","35px",3,"src","alt"],[3,"routerLink"]],template:function(e,r){if(e&1&&u(0,Ie,2,0,"div",1)(1,Pe,16,1,"ng-template",null,0,k),e&2){let m=_(2);c("ngIf",r.countries.length===0)("ngIfElse",m)}},dependencies:[P,g,Ce,j],encapsulation:2})};function Be(n,t){n&1&&l(0,"shared-loading-spinner")}var U=class n{constructor(t){this.countriesService=t}countries=[];initialValue="";isLoading=!1;ngOnInit(){this.countries=this.countriesService.cacheStore.byCapital.countries,this.initialValue=this.countriesService.cacheStore.byCapital.queryTerm}searchByCapital(t){this.isLoading=!0,this.countriesService.searchByCapital(t).subscribe(e=>{this.countries=e,this.isLoading=!1})}static \u0275fac=function(e){return new(e||n)(d(f))};static \u0275cmp=p({type:n,selectors:[["countries-by-capital-page"]],standalone:!1,decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Busqueda por Capital",3,"onDebounce","initialValue"],[4,"ngIf"],[3,"countries"]],template:function(e,r){e&1&&(o(0,"h2"),a(1,"Por Capital"),i(),l(2,"hr"),o(3,"div",0)(4,"div",1)(5,"shared-search-box",2),C("onDebounce",function(S){return r.searchByCapital(S)}),i()()(),l(6,"hr"),o(7,"div",0)(8,"div",1),u(9,Be,1,0,"shared-loading-spinner",3),l(10,"countries-table",4),i()()),e&2&&(s(5),c("initialValue",r.initialValue),s(4),c("ngIf",r.isLoading),s(),c("countries",r.countries))},dependencies:[g,B,b,v],encapsulation:2})};var Re=n=>({"btn-outline-primary active":n});function we(n,t){if(n&1){let e=L();o(0,"button",6),C("click",function(){let m=w(e).$implicit,S=h();return O(S.searchByRegion(m))}),a(1),i()}if(n&2){let e=t.$implicit,r=h();c("ngClass",F(2,Re,r.selectedRegions===e)),s(),E(" ",e," ")}}function Oe(n,t){n&1&&l(0,"shared-loading-spinner")}var q=class n{constructor(t){this.countriesService=t}countries=[];isLoading=!1;regions=["Africa","Americas","Asia","Europe","Oceania"];selectedRegions;ngOnInit(){this.countries=this.countriesService.cacheStore.byRegion.countries,this.selectedRegions=this.countriesService.cacheStore.byRegion.region}searchByRegion(t){this.isLoading=!0,this.selectedRegions=t,this.countriesService.searchByRegion(t).subscribe(e=>{this.countries=e,this.isLoading=!1})}static \u0275fac=function(e){return new(e||n)(d(f))};static \u0275cmp=p({type:n,selectors:[["countries-by-region-page"]],standalone:!1,decls:11,vars:3,consts:[[1,"row"],[1,"col","text-center"],["class","btn mx-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col"],[4,"ngIf"],[3,"countries"],[1,"btn","mx-2",3,"click","ngClass"]],template:function(e,r){e&1&&(o(0,"h2"),a(1,"Por Region"),i(),l(2,"hr"),o(3,"div",0)(4,"div",1),u(5,we,2,4,"button",2),i()(),l(6,"hr"),o(7,"div",0)(8,"div",3),u(9,Oe,1,0,"shared-loading-spinner",4),l(10,"countries-table",5),i()()),e&2&&(s(5),c("ngForOf",r.regions),s(4),c("ngIf",r.isLoading),s(),c("countries",r.countries))},dependencies:[me,P,g,b,v],encapsulation:2})};function Ne(n,t){n&1&&l(0,"shared-loading-spinner")}var H=class n{constructor(t){this.countriesService=t}countries=[];initialValue="";isLoading=!1;ngOnInit(){this.countries=this.countriesService.cacheStore.byCountries.countries,this.initialValue=this.countriesService.cacheStore.byCountries.queryTerm}searchCountry(t){this.isLoading=!0,this.countriesService.searchCountry(t).subscribe(e=>{this.countries=e,this.isLoading=!1})}static \u0275fac=function(e){return new(e||n)(d(f))};static \u0275cmp=p({type:n,selectors:[["countries-by-country-page"]],standalone:!1,decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Busqueda por Pais",3,"onDebounce","initialValue"],[4,"ngIf"],[3,"countries"]],template:function(e,r){e&1&&(o(0,"h2"),a(1,"Por Pais"),i(),l(2,"hr"),o(3,"div",0)(4,"div",1)(5,"shared-search-box",2),C("onDebounce",function(S){return r.searchCountry(S)}),i()()(),l(6,"hr"),o(7,"div",0)(8,"div",1),u(9,Ne,1,0,"shared-loading-spinner",3),l(10,"countries-table",4),i()()),e&2&&(s(5),c("initialValue",r.initialValue),s(4),c("ngIf",r.isLoading),s(),c("countries",r.countries))},dependencies:[g,B,b,v],encapsulation:2})};function Te(n,t){n&1&&(o(0,"div",2),a(1,` Espere por favor
`),i())}function De(n,t){if(n&1&&(o(0,"span",13),a(1),N(2,"uppercase"),i()),n&2){let e=t.$implicit,r=h(2);s(),pe(" ",T(2,2,e)," - ",r.country.translations[e].common," ")}}function Me(n,t){if(n&1&&(o(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),a(4,"Pais: "),o(5,"strong"),a(6),i()()()(),o(7,"div",5)(8,"div",3)(9,"div",6)(10,"h3"),a(11,"Bandera"),i(),l(12,"img",7),i(),o(13,"div",5)(14,"h3"),a(15,"Info"),i(),o(16,"ul",8)(17,"li",9)(18,"strong"),a(19,"Nombre: "),i(),a(20),i(),o(21,"li",9)(22,"strong"),a(23,"Poblacion: "),i(),a(24),N(25,"number"),i(),o(26,"li",9)(27,"strong"),a(28,"C\xF3digo: "),i(),a(29),i()()()()(),o(30,"div",10)(31,"div",5)(32,"h3"),a(33,"Traducciones"),i(),o(34,"div",11),u(35,De,3,4,"span",12),i()()()()),n&2){let e=h();s(6),I(e.country.name.common),s(6),c("src",e.country.flags.svg,M)("alt",e.country.name.common),s(8),E("",e.country.name.common," "),s(4),E("",T(25,7,e.country.population)," "),s(5),E("",e.country.cca3," "),s(6),c("ngForOf",e.languages)}}var Q=class n{constructor(t,e,r){this.activatedRoute=t;this.countryService=e;this.router=r}country;languages;ngOnInit(){this.activatedRoute.params.pipe(ie(({id:t})=>this.countryService.searchcountryByAphaCode(t))).subscribe(t=>{if(!t)return this.router.navigateByUrl("");console.log("Tenemos un pais: ",t),this.country=t,this.languages=Object.keys(t.translations)})}static \u0275fac=function(e){return new(e||n)(d(fe),d(f),d(ye))};static \u0275cmp=p({type:n,selectors:[["countries-country-page"]],standalone:!1,decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"alert","alert-info","text-center"],[1,"row"],[1,"col-12"],[1,"col"],[1,"col-4"],[1,"img-thumbnail",3,"src","alt"],[1,"list-group"],[1,"list-group-item"],[1,"row","mt-2"],[1,"d-flex","flex-wrap"],["class","badge bg-primary m-1",4,"ngFor","ngForOf"],[1,"badge","bg-primary","m-1"]],template:function(e,r){if(e&1&&u(0,Te,2,0,"ng-template",null,0,k)(2,Me,36,9,"div",1),e&2){let m=_(1);s(2),c("ngIf",r.country)("ngIfElse",m)}},dependencies:[P,g,ue,j],encapsulation:2})};var Ve=[{path:"byCapital",component:U},{path:"byRegion",component:q},{path:"byCountry",component:H},{path:"by/:id",component:Q},{path:"**",redirectTo:"byCapital"}],z=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=V({type:n});static \u0275inj=D({imports:[X.forChild(Ve),X]})};var ve=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=V({type:n});static \u0275inj=D({imports:[de,z,he]})};export{ve as CoutriesModule};
